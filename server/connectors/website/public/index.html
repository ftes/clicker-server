<html>
  <body>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      let deviceId = localStorage.getItem('deviceId')
        || `${Math.floor(Math.random() * 1000)}`
      localStorage.setItem('deviceId', deviceId)

      let socket = io.connect()

      socket.on('battery?', function () {
        console.log('battery?')
        socket.emit('battery', { deviceId, raw: Math.random() })
      })

      function update(pressed, event) {
        event.preventDefault() // surpress mousedown event when touch
        socket.emit('press', { deviceId, pressed })
      }
    </script>

    <style>
      #wrapper {
        display: flex; width: 100%; height: 100%; align-items: center; justify-content: center
      }

      .button {
        border-radius: 50%; width: 400px; height: 400px; background-color: red
      }

      .button:active {
        background-color: darkred
      }
    </style>

    <div id="wrapper">
      <div class="button"
        onmousedown="update(true, event)"
        onmouseup="update(false, event)"
        ontouchstart="update(true, event)"
        ontouchend="update(false, event)"
      />
    </div>
  </body>
</html>
